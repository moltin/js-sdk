/*! moltin-sdk minified - v1.0.0 - 2015-06-04 */
var Moltin,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};Moltin=function(){"use strict";function a(a){this.options=this.Merge(this.options,a),this.Storage=new n,this.Address=new b(this),this.Brand=new c(this),this.Cart=new d(this),this.Category=new e(this),this.Checkout=new f(this),this.Collection=new g(this),this.Currency=new h(this),this.Entry=new i(this),this.Gateway=new j(this),this.Order=new k(this),this.Product=new l(this),this.Shipping=new m(this),this.Tax=new o(this),this.Storage.get("mcurrency")&&(this.options.currency=this.Storage.get("mcurrency"))}var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return a.prototype.options={publicId:"",auth:{},url:"https://api.molt.in/",version:"v1",debug:!1,currency:!1,methods:["GET","POST","PUT","DELETE"],notice:function(a,b){return console.log(a+": "+b)}},a.prototype.Merge=function(a,b){var c,d,e;d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],d[c]=e;return d},a.prototype.InArray=function(a,b){return __indexOf.call(b,a)<0?!1:!0},a.prototype.Serialize=function(a,b){var c,d,e;null==b&&(b=null),d=[];for(c in a)e=a[c],c=null!==b?b+"["+c+"]":c,d.push("object"==typeof e?this.Serialize(e,c):encodeURIComponent(c)+"="+encodeURIComponent(e));return d.join("&")},a.prototype.Error=function(a){var b,c,d,e;if(c="","undefind"!=typeof a.errors){e=a.errors;for(b in e)d=e[b],c+=d+"<br />"}else c=a.error;return this.options.notice("Error",c)},a.prototype.Ajax=function(a){var b,c,d,e,f,g,h;b={type:"GET",async:!1,data:null,timeout:5e3,headers:{},url:this.options.url+this.options.version,success:function(a,b,c){},error:function(a,b,c){}},b=this.Merge(b,a),b.type=b.type.toUpperCase();try{e=new XMLHttpRequest}catch(i){c=i;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){return c=i,!1}}"GET"===b.type?(b.url+="?"+this.Serialize(b.data),b.data=null):b.data=this.Serialize(b.data),e.open(b.type,b.url,b.async),f=setTimeout(function(a){return function(){return e.abort(),b.error(e,408,"Your request timed out")}}(this),b.timeout),h=b.headers;for(d in h)g=h[d],e.setRequestHeader(d,g);return e.onreadystatechange=function(){var a;return 4!==e.readyState?null:(clearTimeout(f),a=JSON.parse(e.responseText),"2"!==e.status.toString().charAt(0)?b.error(e,e.status,a):b.success(a,e.status,e))},e.send(b.data)},a.prototype.Authenticate=function(a,b){var c;return this.options.publicId.length<=0&&"function"==typeof b&&b("error","Public ID must be set",401),null!==this.Storage.get("mtoken")&&parseInt(this.Storage.get("mexpires"))>Date.now()?(this.options.auth={token:this.Storage.get("mtoken"),expires:this.Storage.get("mexpires")},"function"==typeof a&&a(this.options.auth),c=new CustomEvent("MoltinReady",{detail:this}),window.dispatchEvent(c),this):(this.Ajax({type:"POST",url:this.options.url+"oauth/access_token",data:{grant_type:"implicit",client_id:this.options.publicId},async:"function"==typeof a?!0:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(b){return function(d,e,f){return b.options.auth={token:d.access_token,expires:1e3*parseInt(d.expires)},b.Storage.set("mtoken",d.access_token),b.Storage.set("mexpires",b.options.auth.expires),"function"==typeof a&&a(d),c=new CustomEvent("MoltinReady",{detail:b}),window.dispatchEvent(c)}}(this),error:function(a){return function(a,c,d){return"function"==typeof b?b("error","Authorization failed",401):void 0}}(this)}),this)},a.prototype.Request=function(a,b,c,d,e){var f,g;return null==b&&(b="GET"),null==c&&(c=null),f={},g={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.options.auth.token},null===this.options.auth.token&&"function"==typeof e&&e("error","You much authenticate first",401),Date.now()>parseInt(this.Storage.get("mexpires"))&&this.Authenticate(null,e),this.InArray(b,this.options.methods)||"function"==typeof e&&e("error","Invalid request method ("+b+")",400),this.options.currency&&(g["X-Currency"]=this.options.currency),this.Ajax({type:b,url:this.options.url+this.options.version+"/"+a,data:c,async:"function"==typeof d?!0:!1,headers:g,success:function(a){return function(a,b,c){return"function"==typeof d?d(a.result,"undefined"!=typeof a.pagination?a.pagination:null):f=a}}(this),error:function(a){return function(b,c,d){var g;return g=JSON.parse(b.responseText),g.status===!1&&("function"==typeof e?e("error","undefined"!=typeof g.errors?g.errors:g.error,c):a.Error("undefined"!=typeof g.errors?g.errors:g.error)),f=g}}(this)}),"undefined"==typeof d?f.result:void 0},n=function(){function a(){}return a.prototype.set=function(a,b,c){var d,e;return e="",c&&(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="; expires="+d.toGMTString()),document.cookie=a+"="+b+e+"; path=/"},a.prototype.get=function(a){var b,c,d,e;for(a+="=",e=document.cookie.split(";"),c=0,d=e.length;d>c;c++){for(b=e[c];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(a))return b.substring(a.length,b.length)}return null},a.prototype.remove=function(a){return this.set(a,"",-1)},a}(),b=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c,d){return this.m.Request("customers/"+a+"/addresses/"+b,"GET",null,c,d)},a.prototype.Find=function(a,b,c,d){return this.m.Request("customers/"+a+"/addresses","GET",b,c,d)},a.prototype.List=function(a,b,c,d){return this.m.Request("customers/"+a+"/addresses","GET",b,c,d)},a.prototype.Create=function(a,b,c,d){return this.m.Request("customers/"+a+"/addresses","POST",b,c,d)},a.prototype.Fields=function(a,b,c,d){var e;return null==a&&(a=0),null==b&&(b=0),e=a>0&&0>=b?"customers/"+a+"/addresses/fields":a>0&&b>0?"customers/"+a+"/addresses/"+b+"/fields":"addresses/fields",this.m.Request(e,"GET",null,c,d)},a}(),c=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("brands/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("brands","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("brands","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="brands/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),d=function(){function a(a){this.m=a,this.identifier=this.GetIdentifier()}return a.prototype.GetIdentifier=function(){var a;return null!==this.m.Storage.get("mcart")?this.m.Storage.get("mcart"):(a="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(a){return(16*Math.random()|0).toString(16)}),this.m.Storage.set("mcart",a),a)},a.prototype.Contents=function(a,b){return this.m.Request("carts/"+this.identifier,"GET",null,a,b)},a.prototype.Insert=function(a,b,c,d,e){return null==b&&(b=1),null==c&&(c=null),this.m.Request("carts/"+this.identifier,"POST",{id:a,quantity:b,modifier:c},d,e)},a.prototype.Update=function(a,b,c,d){return this.m.Request("carts/"+this.identifier+"/item/"+a,"PUT",b,c,d)},a.prototype.Delete=function(a,b){return this.m.Request("carts/"+this.identifier,"DELETE",null,a,b)},a.prototype.Remove=function(a,b,c){return this.m.Request("carts/"+this.identifier+"/item/"+a,"DELETE",null,b,c)},a.prototype.Item=function(a,b,c){return this.m.Request("carts/"+this.identifier+"/item/"+a,"GET",null,b,c)},a.prototype.InCart=function(a,b,c){return this.m.Request("carts/"+this.identifier+"/has/"+a,"GET",null,b,c)},a.prototype.Checkout=function(a,b){return this.m.Request("carts/"+this.identifier+"/checkout","GET",null,a,b)},a.prototype.Complete=function(a,b,c){return this.m.Request("carts/"+this.identifier+"/checkout","POST",a,b,c)},a.prototype.Discount=function(a,b){return null===a||a===!1?this.m.Request("carts/"+this.identifier+"/discount","DELETE",null,b):this.m.Request("carts/"+this.identifier+"/discount","POST",{code:a},b)},a}(),e=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("categories/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("categories","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("categories","GET",a,b,c)},a.prototype.Tree=function(a,b,c){return this.m.Request("categories/tree","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="categories/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),f=function(){function a(a){this.m=a}return a.prototype.Payment=function(a,b,c,d,e){return this.m.Request("checkout/payment/"+a+"/"+b,"POST",c,d,e)},a}(),g=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("collections/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("collections","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("collections","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="collections/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),h=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("currencies/"+a,"GET",null,b,c)},a.prototype.Set=function(a,b,c){return this.m.Storage.set("mcurrency",a),this.m.options.currency=a,"function"==typeof b?b(a):void 0},a.prototype.Find=function(a,b,c){return this.m.Request("currencies","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("currencies","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="currencies/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),i=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries/"+b,"GET",null,c,d)},a.prototype.Find=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries","GET",b,c,d)},a.prototype.List=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries","GET",b,c,d)},a}(),j=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("gateways/"+a,"GET",null,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("gateways","GET",a,b,c)},a}(),k=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("orders/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("orders","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("orders","GET",a,b,c)},a.prototype.Create=function(a,b,c){return this.m.Request("orders","POST",a,b,c)},a}(),l=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("products/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("products","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("products","GET",a,b,c)},a.prototype.Search=function(a,b,c){return this.m.Request("products/search","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="products/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a.prototype.Modifiers=function(a,b,c){return this.m.Request("products/"+a+"/modifiers","GET",null,b,c)},a.prototype.Variations=function(a,b,c){return this.m.Request("products/"+a+"/variations","GET",null,b,c)},a}(),m=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("shipping/"+a,"GET",null,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("shipping","GET",a,b,c)},a}(),o=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){return this.m.Request("taxes/"+id,"GET",null,a,b)},a.prototype.Find=function(a,b,c){return this.m.Request("taxes","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("taxes","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="taxes/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),a}();
//# sourceMappingURL=moltin.min.map