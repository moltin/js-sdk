/*! moltin-sdk minified - v1.0.0 - 2015-10-07 */
var Address,Brand,Cart,Category,Checkout,Collection,Currency,Entry,Gateway,Language,Moltin,Order,Product,Shipping,Storage,Tax,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};Moltin=function(){"use strict";function a(a){this.options=this.Merge(this.options,a),this.Storage=new Storage,this.Address=new Address(this),this.Brand=new Brand(this),this.Cart=new Cart(this),this.Category=new Category(this),this.Checkout=new Checkout(this),this.Collection=new Collection(this),this.Currency=new Currency(this),this.Entry=new Entry(this),this.Gateway=new Gateway(this),this.Language=new Language(this),this.Order=new Order(this),this.Product=new Product(this),this.Shipping=new Shipping(this),this.Tax=new Tax(this),this.Storage.get("mcurrency")&&(this.options.currency=this.Storage.get("mcurrency")),this.Storage.get("mlanguage")&&(this.options.language=this.Storage.get("mlanguage"))}return a.prototype.options={publicId:"",auth:{},url:"https://api.molt.in/",version:"v1",debug:!1,currency:!1,language:!1,methods:["GET","POST","PUT","DELETE"],notice:function(a,b){return console.log(a+": "+b)}},a.prototype.Merge=function(a,b){var c,d,e;d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],d[c]=e;return d},a.prototype.InArray=function(a,b){return __indexOf.call(b,a)<0?!1:!0},a.prototype.Serialize=function(a,b){var c,d,e;null==b&&(b=null),d=[];for(c in a)e=a[c],c=null!==b?""+b+"["+c+"]":c,"object"==typeof e?d.push(this.Serialize(e,c)):d.push(encodeURIComponent(c)+"="+encodeURIComponent(e));return d.join("&")},a.prototype.Error=function(a){var b,c,d,e;if(c="","undefind"!=typeof a.errors){e=a.errors;for(b in e)d=e[b],c+=""+d+"<br/>"}else c=a.error;return this.options.notice("Error",c)},a.prototype.Ajax=function(a){var b,c,d,e,f,g,h;b={type:"GET",async:!1,data:null,timeout:6e4,headers:{},url:this.options.url+this.options.version,success:function(a,b,c){},error:function(a,b,c){}},b=this.Merge(b,a),b.type=b.type.toUpperCase();try{e=new XMLHttpRequest}catch(i){c=i;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){return c=i,!1}}"GET"===b.type?(b.url+="?"+this.Serialize(b.data),b.data=null):b.data=this.Serialize(b.data),e.open(b.type,b.url,b.async),f=setTimeout(function(){return e.abort(),b.error(e,408,"Your request timed out")},b.timeout),h=b.headers;for(d in h)g=h[d],e.setRequestHeader(d,g);return e.onreadystatechange=function(){var a;return 4!==e.readyState?null:(clearTimeout(f),a=JSON.parse(e.responseText),"2"!==e.status.toString().charAt(0)?b.error(e,e.status,a):b.success(a,e.status,e))},e.send(b.data)},a.prototype.Authenticate=function(a,b){var c,d;return c=parseInt(this.Storage.get("mexpires"))>Date.now(),this.options.publicId.length<=0&&"function"==typeof b&&b("error","Public ID must be set",401),null!==this.Storage.get("mtoken")&&c?(this.options.auth={token:this.Storage.get("mtoken"),expires:this.Storage.get("mexpires")},"function"==typeof a&&a(this.options.auth),d=document.createEvent("CustomEvent"),d.initCustomEvent("MoltinReady",!1,!1,this),window.dispatchEvent(d),this):(this.Ajax({type:"POST",url:""+this.options.url+"oauth/access_token",data:{grant_type:"implicit",client_id:this.options.publicId},async:"function"==typeof a?!0:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(b){return function(c,e,f){return b.options.auth={token:c.access_token,expires:1e3*parseInt(c.expires)},b.Storage.set("mtoken",c.access_token),b.Storage.set("mexpires",b.options.auth.expires),"function"==typeof a&&a(c),d=document.createEvent("CustomEvent"),d.initCustomEvent("MoltinReady",!1,!1,b),window.dispatchEvent(d)}}(this),error:function(a,c,d){return"function"==typeof b?b("error","Authorization failed",401):void 0}}),this)},a.prototype.Request=function(a,b,c,d,e){var f,g;return null==b&&(b="GET"),null==c&&(c=null),f={},g={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.options.auth.token},null===this.options.auth.token&&"function"==typeof e&&e("error","You much authenticate first",401),Date.now()>parseInt(this.Storage.get("mexpires"))&&this.Authenticate(null,e),this.InArray(b,this.options.methods)||"function"==typeof e&&e("error","Invalid request method ("+b+")",400),this.options.currency&&(g["X-Currency"]=this.options.currency),this.options.language&&(g["X-Language"]=this.options.language),this.Ajax({type:b,url:""+(this.options.url+this.options.version)+"/"+a,data:c,async:"function"==typeof d?!0:!1,headers:g,success:function(a,b,c){var e;return"undefined"!=typeof a.pagination&&(e=a.pagination),e=null,"function"==typeof d?d(a.result,e):f=a},error:function(a){return function(b,c,d){var g,h;return h=JSON.parse(b.responseText),"undefined"!=typeof h.errors?g=h.errors:g(h.error),h.status===!1&&("function"==typeof e?e("error",g,c):a.Error(g)),f=h}}(this)}),"undefined"==typeof d?f.result:void 0},a}(),Storage=function(){function a(){}return a.prototype.set=function(a,b,c){var d,e;return e="",c&&(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="; expires="+d.toGMTString()),document.cookie=""+a+"="+(b+e)+"; path=/"},a.prototype.get=function(a){var b,c,d,e;for(a+="=",e=document.cookie.split(";"),c=0,d=e.length;d>c;c++){for(b=e[c];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(a))return b.substring(a.length,b.length)}return null},a.prototype.remove=function(a){return this.set(a,"",-1)},a}(),Address=function(){function a(a){this.m=a}return a.prototype.BaseUrl=function(a){return"customers/"+a+"/addresses/"},a.prototype.Get=function(a,b,c,d){return this.m.Request(""+this.BaseUrl()+"/"+b,"GET",null,c,d)},a.prototype.Find=function(a,b,c,d){return this.m.Request(this.BaseUrl,"GET",b,c,d)},a.prototype.List=function(a,b,c,d){return this.m.Request(this.BaseUrl,"GET",b,c,d)},a.prototype.Create=function(a,b,c,d){return this.m.Request(this.BaseUrl,"POST",b,c,d)},a.prototype.Fields=function(a,b,c,d){var e;return null==a&&(a=0),null==b&&(b=0),e=a>0&&0>=b?""+this.BaseUrl+"/fields":a>0&&b>0?""+this.BaseUrl+"/"+b+"/fields":"addresses/fields",this.m.Request(e,"GET",null,c,d)},a}(),Brand=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("brands/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("brands","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("brands","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="brands/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),Cart=function(){function a(a){this.m=a}return a.id=a.GetIdentifier(),a.prototype.BaseUrl=function(a){return"carts/"+a},a.prototype.GetIdentifier=function(){var a;return null!==this.m.Storage.get("mcart")?this.m.Storage.get("mcart"):(a="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(a){return(16*Math.random()|0).toString(16)}),this.m.Storage.set("mcart",a),a)},a.prototype.Contents=function(a,b){return this.m.Request(this.BasUrl(this.id),"GET",null,a,b)},a.prototype.Insert=function(a,b,c,d,e){var f;return null==b&&(b=1),null==c&&(c=null),f={id:a,quantity:b,modifier:c},this.m.Request(this.BasUrl(this.id),"POST",f,d,e)},a.prototype.Update=function(a,b,c,d){return this.m.Request(""+this.BasUrl(this.id)+"/item/"+a,"PUT",b,c,d)},a.prototype.Delete=function(a,b){return this.m.Request(this.BasUrl(this.id),"DELETE",null,a,b)},a.prototype.Remove=function(a,b,c){return this.m.Request(""+this.BaseUrl(this.id)+"/item/"+a,"DELETE",null,b,c)},a.prototype.Item=function(a,b,c){return this.m.Request(""+this.BaseUrl(this.id)+"/item/"+a,"GET",null,b,c)},a.prototype.InCart=function(a,b,c){return this.m.Request(""+this.BasUrl(this.id)+"/has/"+a,"GET",null,b,c)},a.prototype.Checkout=function(a,b){return this.m.Request(""+this.BasUrl(this.id)+"/checkout","GET",null,a,b)},a.prototype.Complete=function(a,b,c){return this.m.Request(""+this.BasUrl(this.id)+"/checkout","POST",a,b,c)},a.prototype.Discount=function(a,b,c){var d;return d={code:a},(null===a||a===!1)&&this.m.Request(""+this.BasUrl(this.id)+"/discount","DELETE",null,b,c),this.m.Request(""+this.BasUrl(this.id)+"/discount","POST",d,b.error)},a}(),Category=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("categories/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("categories","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("categories","GET",a,b,c)},a.prototype.Tree=function(a,b,c){return this.m.Request("categories/tree","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="categories/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),Checkout=function(){function a(a){this.m=a}return a.prototype.Payment=function(a,b,c,d,e){var f;return f="checkout/payment/"+a+"/"+b,this.m.Request(f,"POST",c,d,e)},a}(),Collection=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("collections/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("collections","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("collections","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="collections/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),Currency=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("currencies/"+a,"GET",null,b,c)},a.prototype.Set=function(a,b,c){return this.m.Storage.set("mcurrency",a),this.m.options.currency=a,"function"==typeof b?b(a):void 0},a.prototype.Find=function(a,b,c){return this.m.Request("currencies","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("currencies","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="currencies/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}(),Entry=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries/"+b,"GET",null,c,d)},a.prototype.Find=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries","GET",b,c,d)},a.prototype.List=function(a,b,c,d){return this.m.Request("flows/"+a+"/entries","GET",b,c,d)},a}(),Gateway=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("gateways/"+a,"GET",null,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("gateways","GET",a,b,c)},a}(),Language=function(){function a(a){this.m=a}return a.prototype.Set=function(a,b,c){return this.m.Storage.set("mlanguage",a),this.m.options.language=a,"function"==typeof b?b(a):void 0},a}(),Order=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("orders/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("orders","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("orders","GET",a,b,c)},a.prototype.Create=function(a,b,c){return this.m.Request("orders","POST",a,b,c)},a}(),Product=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("products/"+a,"GET",null,b,c)},a.prototype.Find=function(a,b,c){return this.m.Request("products","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("products","GET",a,b,c)},a.prototype.Search=function(a,b,c){return this.m.Request("products/search","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="products/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a.prototype.Modifiers=function(a,b,c){return this.m.Request("products/"+a+"/modifiers","GET",null,b,c)},a.prototype.Variations=function(a,b,c){return this.m.Request("products/"+a+"/variations","GET",null,b,c)},a}(),Shipping=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b,c){return this.m.Request("shipping/"+a,"GET",null,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("shipping","GET",a,b,c)},a}(),Tax=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){return this.m.Request("taxes/"+id,"GET",null,a,b)},a.prototype.Find=function(a,b,c){return this.m.Request("taxes","GET",a,b,c)},a.prototype.List=function(a,b,c){return this.m.Request("taxes","GET",a,b,c)},a.prototype.Fields=function(a,b,c){var d;return null==a&&(a=0),d="taxes/"+(0!==a?a+"/fields":"fields"),this.m.Request(d,"GET",null,b,c)},a}();
//# sourceMappingURL=moltin.min.map