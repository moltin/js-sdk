{"version":3,"sources":["moltin.js"],"names":["_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","__in__","needle","haystack","indexOf","_typeof","Symbol","iterator","obj","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","Moltin","options","this","config","clientId","host","port","protocol","version","debug","currency","language","timeout","contentType","auth","expires","uri","methods","Helper","HelperFactory","Merge","Storage","StorageFactory","RequestFactory","Products","get","Error","data","grant_type","client_id","headers","Content-Type","r","s","c","promise","Promise","resolve","reject","make","then","set","access_token","catch","error","method","arguments","undefined","t","req","token","Date","now","toString","Authenticate","Abstract","m","id","callback","Request","endpoint","terms","_Abstract","_this","getPrototypeOf","o1","o2","o3","k","v","arr","prefix","str","push","Serialize","encodeURIComponent","join","response","msg","errors","notice","driver","XMLHttpRequest","e","ActiveXObject","_this2","toUpperCase","url","open","setTimeout","abort","setRequestHeader","onreadystatechange","readyState","clearTimeout","json","JSON","parse","responseText","err","send","window","localStorage","setItem","getItem","removeItem"],"mappings":"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","file":"moltin.min.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Moltin = function () {\n  function Moltin(options) {\n    _classCallCheck(this, Moltin);\n\n    this.config = {\n      clientId: 'umRG34nxZVGIuCSPfYf8biBSvtABgTR8GMUtflyE',\n      host: 'api.molt.in',\n      port: '443',\n      protocol: 'https',\n      version: 'v1',\n      debug: false,\n      currency: false,\n      language: false,\n      timeout: 60000,\n      contentType: 'application/json',\n      auth: {\n        expires: 3600,\n        uri: 'oauth/access_token'\n      },\n      methods: ['GET', 'POST', 'PUT', 'DELETE']\n    };\n\n    this.Helper = new HelperFactory();\n    this.config = this.Helper.Merge(this.config, options);\n\n    this.Storage = new StorageFactory(this);\n    this.RequestFactory = new RequestFactory(this);\n\n    this.Products = new Products(this);\n\n    /*\n    @Shipping      = new Shipping @\n    @Tax           = new Tax @\n    @Address       = new Address @\n    @Brand         = new Brand @\n    @Cart          = new Cart @\n    @Category      = new Category @\n    @Checkout      = new Checkout @\n    @Collection    = new Collection @\n    @Currency      = new Currency @\n    @Entry         = new Entry @\n    @Gateway       = new Gateway @\n    @Language      = new Language @\n    @Order         = new Order @\n    */\n\n    if (this.Storage.get('mcurrency')) {\n      this.config.currency = this.Storage.get('mcurrency');\n    }\n\n    if (this.Storage.get('mlanguage')) {\n      this.config.language = this.Storage.get('mlanguage');\n    }\n\n    return this;\n  }\n\n  _createClass(Moltin, [{\n    key: 'Authenticate',\n    value: function Authenticate() {\n      // Check Client ID is set\n      if (this.config.clientId.length <= 0) {\n        throw new Error(\"You must have a client id set\");\n      }\n\n      var data = {\n        grant_type: 'implicit',\n        client_id: this.config.clientId\n      };\n\n      var headers = { 'Content-Type': 'application/x-www-form-urlencoded' }; //@config.contentType\n\n      var r = this.RequestFactory;\n      var s = this.Storage;\n      var c = this.config;\n\n      var promise = new Promise(function (resolve, reject) {\n        return r.make(c.auth.uri, 'POST', data, headers).then(function (data) {\n          s.set('mexpires', data.expires);\n          s.set('mtoken', data.access_token);\n          return resolve(data);\n        }).catch(function (error) {\n          return reject(error);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'Request',\n    value: function Request(uri, method, data) {\n      var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      var r = this.RequestFactory;\n      var s = this.Storage;\n      var t = this;\n\n      var promise = new Promise(function (resolve, reject) {\n        var req = function req() {\n          var token = s.get('mtoken');\n          headers['Authorization'] = 'Bearer: ' + token;\n\n          return r.make(uri, method, data, headers).then(function (data) {\n            return resolve(data);\n          }).catch(function (error) {\n            return reject(error);\n          });\n        };\n\n        if (!s.get('mtoken') || Date.now().toString() >= s.get('mexpires')) {\n          return t.Authenticate().then(req).catch(function (error) {\n            return reject(error);\n          });\n        } else {\n          req();\n        }\n      });\n\n      return promise;\n    }\n  }]);\n\n  return Moltin;\n}();\n\nvar Abstract = function () {\n  function Abstract(m) {\n    _classCallCheck(this, Abstract);\n\n    this.m = m;\n  }\n\n  _createClass(Abstract, [{\n    key: 'Get',\n    value: function Get(id, callback, error) {\n      return this.m.Request(this.endpoint + '/' + id, 'GET', null, callback, error);\n    }\n  }, {\n    key: 'Find',\n    value: function Find(terms, callback, error) {\n      return this.m.Request(this.endpoint, 'GET', terms, callback, error);\n    }\n  }, {\n    key: 'List',\n    value: function List(terms) {\n      return this.m.Request(this.endpoint, 'GET', terms);\n    }\n  }, {\n    key: 'Fields',\n    value: function Fields(callback, error) {\n      var id = 0;\n      var uri = this.endpoint + '/' + (id !== 0 ? id + '/fields' : 'fields');\n\n      return this.m.Request(uri, 'GET', null, callback, error);\n    }\n  }]);\n\n  return Abstract;\n}();\n\nvar Products = function (_Abstract) {\n  _inherits(Products, _Abstract);\n\n  function Products(endpoint) {\n    _classCallCheck(this, Products);\n\n    var _this = _possibleConstructorReturn(this, (Products.__proto__ || Object.getPrototypeOf(Products)).call(this, endpoint));\n\n    _this.endpoint = 'products';\n    return _this;\n  }\n\n  _createClass(Products, [{\n    key: 'Search',\n    value: function Search(terms, callback, error) {\n      return this.m.Request(this.endpoint + '/search', 'GET', terms, callback, error);\n    }\n  }, {\n    key: 'Modifiers',\n    value: function Modifiers(id, callback, error) {\n      return this.m.Request(this.endpoint + '/' + id + '/modifiers', 'GET', null, callback, error);\n    }\n  }, {\n    key: 'Variations',\n    value: function Variations(id, callback, error) {\n      return this.m.Request(this.endpoint + '/' + id + '/variations', 'GET', null, callback, error);\n    }\n  }]);\n\n  return Products;\n}(Abstract);\n\nvar HelperFactory = function () {\n  function HelperFactory() {\n    _classCallCheck(this, HelperFactory);\n  }\n\n  _createClass(HelperFactory, [{\n    key: 'Merge',\n    value: function Merge(o1, o2) {\n      var o3 = {};\n\n      for (var k in o1) {\n        var v = o1[k];o3[k] = v;\n      }\n      for (k in o2) {\n        var v = o2[k];o3[k] = v;\n      }\n\n      return o3;\n    }\n  }, {\n    key: 'InArray',\n    value: function InArray(key, arr) {\n      if (!arr || !__in__(key, arr)) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'Serialize',\n    value: function Serialize(obj) {\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      var str = [];\n\n      for (var k in obj) {\n        var v = obj[k];\n\n        k = prefix !== null ? prefix + '[' + k + ']' : k;\n        str.push((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' ? this.Serialize(v, k) : encodeURIComponent(k) + '=' + encodeURIComponent(v));\n      }\n\n      return str.join('&');\n    }\n  }, {\n    key: 'Error',\n    value: function Error(response) {\n      var msg = '';\n\n      if (typeof response.errors !== 'undefined') {\n        for (var k in response.errors) {\n          var v = response.errors[k];msg += v + '<br />';\n        }\n      } else {\n        msg = response.error;\n      }\n\n      return this.options.notice('Error', msg);\n    }\n  }]);\n\n  return HelperFactory;\n}();\n\nfunction __in__(needle, haystack) {\n  return haystack.indexOf(needle) >= 0;\n}\n\nvar RequestFactory = function () {\n  function RequestFactory(m) {\n    _classCallCheck(this, RequestFactory);\n\n    this.driver = false;\n    this.m = m;\n\n    try {\n      this.driver = new XMLHttpRequest();\n    } catch (e) {\n      try {\n        this.driver = new ActiveXObject(\"Msxml2.XMLHTTP\");\n      } catch (e) {\n        throw new Error(\"Request factory boot failed\");\n      }\n    }\n\n    return this;\n  }\n\n  _createClass(RequestFactory, [{\n    key: 'make',\n    value: function make(uri, method, data, headers) {\n      var _this2 = this;\n\n      method = method.toUpperCase();\n      var url = this.m.config.protocol + '://' + this.m.config.host + (uri !== 'oauth/access_token' ? '/' + this.m.config.version + '/' + uri : '/' + uri);\n\n      if (method === 'GET') {\n        url += '?' + this.m.Helper.Serialize(data);\n        data = null;\n      } else {\n        data = this.m.Helper.Serialize(data);\n      }\n\n      this.driver.open(method, url, true);\n\n      var timeout = setTimeout(function () {\n        _this2.driver.abort();\n        return _this2.driver.error(_this2.driver, 408, 'Your request timed out');\n      }, this.m.config.timeout);\n\n      for (var k in headers) {\n        var v = headers[k];this.driver.setRequestHeader(k, v);\n      }\n\n      var r = this.driver;\n      var promise = new Promise(function (resolve, reject) {\n        return r.onreadystatechange = function () {\n\n          if (r.readyState !== 4) {\n            return null;\n          }\n\n          clearTimeout(timeout);\n\n          try {\n            var json = JSON.parse(r.responseText);\n            return resolve(json);\n          } catch (err) {\n            return reject(new Error(err));\n          }\n        };\n      });\n\n      this.driver.send(data);\n\n      return promise;\n    }\n  }]);\n\n  return RequestFactory;\n}();\n\nvar StorageFactory = function () {\n  function StorageFactory(m) {\n    _classCallCheck(this, StorageFactory);\n\n    this.m = m;\n  }\n\n  _createClass(StorageFactory, [{\n    key: 'set',\n    value: function set(key, value) {\n      return window.localStorage.setItem(key, value);\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      return window.localStorage.getItem(key);\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(key) {\n      return window.localStorage.removeItem(key);\n    }\n  }]);\n\n  return StorageFactory;\n}();\n//# sourceMappingURL=moltin.js.map\n"]}